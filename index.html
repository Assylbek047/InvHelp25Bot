<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Private Banking — Mini App</title>

  <!-- Подключение шрифтов -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <!-- Стили -->
  <link rel="stylesheet" href="./style.css" />

  <!-- Telegram SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* Исправление для чёрного экрана */
    #welcome[hidden], .hide { display:none !important; }
    #app { min-height:100svh; position:relative; }
    body, html { margin:0; padding:0; height:100%; }

    /* Доработка приборов */
    .wm { position:absolute; pointer-events:none; z-index:0; }
    .wm-astrolabe {
      left:-100px; bottom:-80px;
      width:720px; height:720px;
      background:url('./assets/astrolabe.svg') no-repeat center/contain;
      opacity:0.35;
      filter:drop-shadow(0 0 18px rgba(201,168,106,0.6)) sepia(1) saturate(1.2);
      mix-blend-mode:screen;
    }
    .wm-pendulum {
      right:-70px; top:-60px;
      width:540px; height:540px;
      background:url('./assets/pendulum.svg') no-repeat center/contain;
      opacity:0.35;
      filter:drop-shadow(0 0 14px rgba(201,168,106,0.5)) sepia(1) saturate(1.2);
      mix-blend-mode:screen;
    }
  </style>
</head>
<body>
  <!-- WELCOME экран (обложка) -->
  <section id="welcome" class="screen">
    <div class="wm wm-astrolabe"></div>
    <div class="wm wm-pendulum"></div>

    <h1 class="brand">Private<br/>Banking</h1>
    <p class="tagline">Ваш персональный инвестиционный ассистент</p>
    <button id="enterBtn" class="btn btn-accent">Войти</button>
  </section>

  <!-- APP (основное приложение) -->
  <section id="app" class="app" hidden>
    <header class="top">
      <div class="title">Инвест-ассистент</div>
      <button id="fab" class="btn btn-accent ghost">Обновить все</button>
    </header>

    <!-- Табы для навигации -->
    <nav class="tabs" id="tabs">
      <button class="tab active" data-target="home">Главная</button>
      <button class="tab" data-target="crypto">Crypto</button>
      <button class="tab" data-target="stocks">Stocks</button>
      <button class="tab" data-target="commodities">Commodities</button>
      <button class="tab" data-target="profile">Профиль</button>
    </nav>

    <main>
      <!-- Главная -->
      <section id="home" class="view active">
        <div class="card">
          <div class="card-title">Сводка</div>
          <div id="home-brief" class="brief">
            <div class="sk sk-line"></div>
            <div class="sk sk-line w50"></div>
          </div>
        </div>
        <div class="grid">
          <div class="card">
            <div class="card-title">Крипта</div>
            <div id="crypto-list" class="list muted">Загрузка…</div>
          </div>
          <div class="card">
            <div class="card-title">Акции / ETF</div>
            <div id="stocks-list" class="list muted">Загрузка…</div>
          </div>
          <div class="card">
            <div class="card-title">Commodities</div>
            <div id="commodities-list" class="list muted">Загрузка…</div>
          </div>
        </div>

        <!-- Графики (отрисовываются через Chart.js) -->
        <div class="card">
          <div class="card-title">BTC — 30 дней</div>
          <canvas id="chart-btc" height="120"></canvas>
        </div>
        <div class="card">
          <div class="card-title">AAPL — 30 дней</div>
          <canvas id="chart-aapl" height="120"></canvas>
        </div>
        <div class="card">
          <div class="card-title">GOLD — 30 дней</div>
          <canvas id="chart-gold" height="120"></canvas>
        </div>
        <div class="card">
          <div class="card-title">Новости / Инсайты</div>
          <div id="news-list" class="news-list"></div>
        </div>
      </section>

      <!-- Crypto -->
      <section id="crypto" class="view">
        <div class="card">
          <div class="card-title">Криптовалюты</div>
          <div id="crypto-only" class="list muted">Загрузка…</div>
        </div>
        <div class="card">
          <div class="card-title">Новости / Инсайты</div>
          <div id="crypto-news" class="news-list"></div>
        </div>
      </section>

      <!-- Stocks -->
      <section id="stocks" class="view">
        <div class="card">
          <div class="card-title">Акции и ETF</div>
          <div id="stocks-only" class="list muted">Загрузка…</div>
        </div>
        <div class="card">
          <div class="card-title">Новости / Инсайты</div>
          <div id="stocks-news" class="news-list"></div>
        </div>
      </section>

      <!-- Commodities -->
      <section id="commodities" class="view">
        <div class="card">
          <div class="card-title">Золото и нефть</div>
          <div id="commodities-only" class="list muted">Загрузка…</div>
        </div>
        <div class="card">
          <div class="card-title">Новости / Инсайты</div>
          <div id="commodities-news" class="news-list"></div>
        </div>
      </section>

      <!-- Profile -->
      <section id="profile" class="view">
        <div class="card">
          <div class="card-title">Профиль</div>
          <div class="muted">Здесь будут настройки, риск-профиль и уведомления.</div>
        </div>
      </section>
    </main>

    <footer class="build">build: private-banking (welcome → app, tabs, API, watermark, charts)</footer>
  </section>

  <!-- Подключение логики приложения -->
  <script src="./app.js?v=15" defer></script>
</body>
</html>
